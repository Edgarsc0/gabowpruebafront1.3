<head>
	<!-- Load plotly.js into the DOM -->
	<script src='https://cdn.plot.ly/plotly-2.14.0.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
</head>

<body>
	<div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>
    <script>
        var data = [
            {
                type: "scattermapbox",
                text: "CECyT9",
                lon: [-99.1755475346185],
                lat: [19.453541614839263],
                marker: { color: "fuchsia", size: 30 }
            },
            {
                //19.50353658790755, -99.20293583642929  19.44608712687418, -99.14333273147834  19.472819274952897, -99.13332626085025
                type: "scattermapbox",
                text: "Town Center",
                lon: [-99.20293583642929],
                lat: [19.50353658790755],
                marker: { color: "fuchsia", size: 30, }
            }
        ];

        var layout = {
            dragmode: "zoom",
            mapbox: { style: "open-street-map", center: { lat: 19.472819274952897 , lon: -99.14333273147834 }, zoom: 10 },
            margin: { r: 0, t: 0, b: 0, l: 0 }
        };

        Plotly.newPlot("myDiv", data, layout);

        var myPlot = document.getElementById('myDiv');

        myPlot.on('plotly_click',function(Lugar){
            console.log(Lugar.points[0].data.text)
            var latitudLugar = Lugar.points[0].data.lat;
            var longitudLugar = Lugar.points[0].data.lon;
            /*
            layout.mapbox.center.lat = latitudLugar[0];
            layout.mapbox.center.lon = longitudLugar[0];
            layout.mapbox.zoom=13;

            var newLayout = {

                dragmode: "zoom",
                mapbox: { style: "open-street-map", center: { lat: latitudLugar[0] , lon: longitudLugar[0] }, zoom: 10 },
                margin: { r: 0, t: 0, b: 0, l: 0 }

            }
            */
            
            Plotly.relayout("myDiv", {mapbox : { style: "open-street-map", center: { lat: latitudLugar[0] , lon: longitudLugar[0] }, zoom: 15 }});
        });

</script>
</body>